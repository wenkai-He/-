<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

</head>
<div class="square">
</div>

<body>
    <script>
        let count = 0;
        let square = document.querySelector('.square')
        function todo() {
            square.innerHTML = count++
        }
        square.onmousemove = debounce(todo, 500)


        // function debounce(func, wait, immediate) {
        //     let timer;
        //     return function () {
        //         let tag = this;
        //         let args = arguments;
        //         if (timer) {//如果timer存在就清除
        //             clearTimeout(timer)
        //         }
        //         if (immediate) {
        //             let callNow=!timer;
        //            timer=setTimeout(()=>{
        //                 timer=null;
        //             },wait)
        //             if(callNow){
        //                 func.apply(tag, arguments)
        //             }
        //         } else {
        //             timer = setTimeout(() => {
        //                 func.apply(tag, arguments)
        //             }, wait)
        //         }
        //     }
        // }

        // function debounce(func,wait){
        //     let timer;
        //     return function(){
        //         let context=this;
        //         let args=arguments;
        //         clearTimeout(timer);
        //         timer=setTimeout(()=>{
        //             func.apply(context,args)
        //         },wait) 
        //     }
        // }

      function debounce(fn,wait){
          let timer;
          return function(){
              let context=this;
              let args=arguments;
              clearTimeout(timer)
              timer=setTimeout(()=>{
                  fn.apply(context,args)
              },wait)
          }
      }
    </script>
</body>

</html>
<style>
    .square {
        width: 100%;
        height: 300px;
        background-color: black;
        color: white;
        text-align: center;
    }
</style>